"use strict";(self["webpackChunkdesafio_pontotel"]=self["webpackChunkdesafio_pontotel"]||[]).push([[64],{9281:(e,t,s)=>{s.d(t,{SO:()=>a,qb:()=>n,dX:()=>c});s(2100);var r=s(52),l=s.n(r),o="https://desafio-pontotel-backend.herokuapp.com/api/v1/";function i(){return new Promise((e=>{l().defaults.baseURL=o,l().defaults.headers.post["Content-Type"]="application/json",l().defaults.headers.put["Content-Type"]="application/json",l().defaults.headers.patch["Content-Type"]="application/json",l().defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),e()}))}function a(e,t){return new Promise(((s,r)=>{i().then((()=>{var i=JSON.stringify(t);l().post(o+e,i).then((e=>{s(e)})).catch((e=>{r(e)}))}))}))}function n(e,t){return new Promise(((s,r)=>{i().then((()=>{var i=JSON.stringify(t);l().put(o+e,i).then((e=>{s(e)})).catch((e=>{r(e)}))}))}))}function c(e){return new Promise(((t,s)=>{i().then((()=>{l().get(o+e).then((e=>{t(e)})).catch((e=>{s(e)}))}))}))}},2248:(e,t,s)=>{s.d(t,{Z:()=>se});var r=s(3673),l=s(2323),o=s(8880);const i=(0,r._)("div",{class:"q-pl-md q-pt-md q-pb-xs col-12 text-h5 text-grey-7"},"Dados Pessoais",-1),a=(0,r._)("div",{class:"col-12"},[(0,r._)("hr")],-1),n={class:"q-pl-xs q-pr-xs col-12 row"},c={class:"row items-center justify-end"},d={class:"row col-12 q-pl-xs q-pr-xs"},p={class:"row items-center"},h=(0,r._)("div",{style:{"font-size":"1rem"}},"CPF",-1),m=(0,r._)("div",{style:{"font-size":"1rem"}},"PIS",-1),u={class:"row col-12 q-pl-xs q-pr-xs"},S={class:"col-12 q-pl-xs q-pr-xs"},g=(0,r._)("div",{class:"q-mt-md q-pl-md col-12 text-h5 text-grey-7"},"Endereço",-1),y=(0,r._)("div",{class:"col-12"},[(0,r._)("hr")],-1),w={class:"row col-12 q-pl-xs q-pr-xs"},f=(0,r.Uk)("Buscar Endereços pelo CEP"),C={class:"row col-12 q-pl-xs q-pr-xs"},b={class:"row col-12 q-pl-xs q-pr-xs"},D={class:"row justify-center col-12 items-center q-mt-md q-pl-xs q-pr-xs q-mb-md",style:{}};function P(e,t,s,P,v,V){const U=(0,r.up)("q-toolbar-title"),q=(0,r.up)("q-btn"),x=(0,r.up)("q-header"),_=(0,r.up)("q-icon"),k=(0,r.up)("q-input"),F=(0,r.up)("q-date"),O=(0,r.up)("q-popup-proxy"),W=(0,r.up)("q-toggle"),E=(0,r.up)("Select"),I=(0,r.up)("q-tooltip"),N=(0,r.up)("q-page"),Z=(0,r.up)("q-page-container"),Q=(0,r.up)("q-layout"),B=(0,r.up)("q-dialog"),L=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.j4)(B,{maximized:"",modelValue:v.showDialog,"onUpdate:modelValue":t[15]||(t[15]=e=>v.showDialog=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(Q,{view:"Lhh lpR fff",container:"",class:"bg-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(x,{class:"row bg-dark absolute",style:{padding:"10px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(U,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(v.titleDialog),1)])),_:1}),(0,r.Wm)(q,{flat:"",dense:"",icon:"close",align:"right",onClick:V.close},null,8,["onClick"])])),_:1}),(0,r.Wm)(Z,null,{default:(0,r.w5)((()=>[(0,r.Wm)(N,null,{default:(0,r.w5)((()=>[i,a,(0,r._)("div",n,[(0,r.Wm)(k,{error:v.errorName,modelValue:v.name,"onUpdate:modelValue":t[0]||(t[0]=e=>v.name=e),"bg-color":"white",outlined:"",label:"Nome",class:"inputClass col-md-6 col-xs-12"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(_,{name:"person",color:"dark"})])),_:1},8,["error","modelValue"]),(0,r.Wm)(k,{error:v.errorBirthDate,modelValue:v.birthDate,"onUpdate:modelValue":t[2]||(t[2]=e=>v.birthDate=e),class:"inputClass spaceField col-md-6 col-xs-12",label:"Data de Nascimento",mask:"##/##/####",outlined:"","bg-color":"white"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(_,{name:"calendar_today",class:"cursor-pointer",color:"dark"},{default:(0,r.w5)((()=>[(0,r.Wm)(O,{ref:"qDateProxy",cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(F,{modelValue:v.birthDate,"onUpdate:modelValue":t[1]||(t[1]=e=>v.birthDate=e),subtitle:"Data de",title:"Nascimento",mask:"DD-MM-YYYY"},{default:(0,r.w5)((()=>[(0,r._)("div",c,[(0,r.wy)((0,r.Wm)(q,{label:"Ok",color:"primary",flat:""},null,512),[[L]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["error","modelValue"])]),(0,r._)("div",d,[(0,r.Wm)(k,{error:v.errorEmail,modelValue:v.email,"onUpdate:modelValue":t[3]||(t[3]=e=>v.email=e),"bg-color":"white",outlined:"",label:"E-mail",class:"inputClass col-md-6 col-xs-12"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(_,{name:"email",color:"dark"})])),_:1},8,["error","modelValue"]),(0,r.Wm)(k,{error:v.errorCpfPis,modelValue:v.cpfPis,"onUpdate:modelValue":t[5]||(t[5]=e=>v.cpfPis=e),rules:[e=>e.length<=15||"Só é permitido 11 caracteres"],mask:v.maskedCpfPis,"bg-color":"white",outlined:"",label:"CPF/PIS",class:"inputClass spaceField col-md-6 col-xs-12"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(_,{name:"fingerprint",color:"dark"})])),append:(0,r.w5)((()=>[(0,r._)("div",p,[h,(0,r.Wm)(W,{modelValue:v.isPis,"onUpdate:modelValue":t[4]||(t[4]=e=>v.isPis=e),color:"green"},null,8,["modelValue"]),m])])),_:1},8,["error","modelValue","rules","mask"])]),(0,r._)("div",u,[(0,r.Wm)(E,{label:"País",modelValue:v.countrySelected,"onUpdate:modelValue":t[6]||(t[6]=e=>v.countrySelected=e),class:"col-md-6 col-xs-12 inputClass",onFilter:V.filterCountry,error:v.errorCountrySelected,Icon:"public",Options:v.countryFilter},null,8,["modelValue","onFilter","error","Options"]),(0,r.Wm)(E,{label:"Estado",modelValue:v.stateSelected,"onUpdate:modelValue":t[7]||(t[7]=e=>v.stateSelected=e),class:"col-md-6 col-xs-12 text-uppercase inputClass spaceField",onFilter:V.filterState,error:v.errorStateSelected,Icon:"location_city",Options:v.stateFilter,OptionsLabel:"nome",OptionsValue:"sigla"},null,8,["modelValue","onFilter","error","Options"])]),(0,r.wy)((0,r._)("div",S,[(0,r.Wm)(k,{error:v.errorPassword,type:"password",modelValue:v.passwordUser,"onUpdate:modelValue":t[8]||(t[8]=e=>v.passwordUser=e),"bg-color":"white",outlined:"",label:"Senha",class:"inputClass"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(_,{name:"lock",color:"dark"})])),_:1},8,["error","modelValue"])],512),[[o.F8,!1===v.isUpdate]]),g,y,(0,r._)("div",w,[(0,r.Wm)(E,{label:"Cidade",modelValue:v.citySelected,"onUpdate:modelValue":t[9]||(t[9]=e=>v.citySelected=e),class:"col-md-6 col-xs-12 inputClass",onFilter:V.filterCity,error:v.errorCitySelected,Icon:"flag",Options:v.cityFilter,OptionsLabel:"name",OptionsValue:"name"},null,8,["modelValue","onFilter","error","Options"]),(0,r.Wm)(k,{outlined:"","bg-color":"white",modelValue:v.cepSelected,"onUpdate:modelValue":t[10]||(t[10]=e=>v.cepSelected=e),mask:"##.###-###",class:"inputClass spaceField col-md-6 col-xs-12",error:v.errorCEP,label:"CEP"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(_,{name:"apartment",color:"dark"})])),append:(0,r.w5)((()=>[(0,r.Wm)(q,{color:"primary",icon:"search",onClick:V.searchCep,size:"10px"},{default:(0,r.w5)((()=>[(0,r.Wm)(I,{style:{"font-size":"12px"}},{default:(0,r.w5)((()=>[f])),_:1})])),_:1},8,["onClick"])])),_:1},8,["modelValue","error"])]),(0,r._)("div",C,[(0,r.Wm)(k,{error:v.errorStreetSelected,modelValue:v.streetSelected,"onUpdate:modelValue":t[11]||(t[11]=e=>v.streetSelected=e),"bg-color":"white",outlined:"",label:"Rua",class:"inputClass col-md-6 col-xs-12"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(_,{name:"add_road",color:"dark"})])),_:1},8,["error","modelValue"]),(0,r.Wm)(k,{error:v.errorNumberSelected,modelValue:v.numberSelected,"onUpdate:modelValue":t[12]||(t[12]=e=>v.numberSelected=e),"bg-color":"white",outlined:"",label:"Número",class:"inputClass spaceField col-md-6 col-xs-12"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(_,{name:"pin",color:"dark"})])),_:1},8,["error","modelValue"])]),(0,r._)("div",b,[(0,r.Wm)(k,{error:v.errorDistrictSelected,modelValue:v.districtSelected,"onUpdate:modelValue":t[13]||(t[13]=e=>v.districtSelected=e),"bg-color":"white",outlined:"",label:"Bairro",class:"inputClass col-md-6 col-xs-12"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(_,{name:"maps_home_work",color:"dark"})])),_:1},8,["error","modelValue"]),(0,r.Wm)(k,{modelValue:v.complementSelected,"onUpdate:modelValue":t[14]||(t[14]=e=>v.complementSelected=e),"bg-color":"white",outlined:"",label:"Complemento",class:"inputClass spaceField col-md-6 col-xs-12"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(_,{name:"description",color:"dark"})])),_:1},8,["modelValue"])]),(0,r._)("div",D,[(0,r.Wm)(q,{style:{width:"140px"},color:"red",icon:"close",label:"Cancelar",onClick:V.close,disable:v.isDisabled},null,8,["onClick","disable"]),(0,r.Wm)(q,{style:{width:"140px","margin-left":"10px"},color:"green",icon:"save",onClick:V.saveUpdate,label:"Salvar"},null,8,["onClick"])])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}s(7098),s(5363);function v(e,t,s,l,o,i){const a=(0,r.up)("q-icon"),n=(0,r.up)("q-select");return(0,r.wg)(),(0,r.j4)(n,{outlined:"","use-input":s.IsUseInput,options:s.Options,"option-label":s.OptionsLabel,"option-value":s.OptionsValue},{prepend:(0,r.w5)((()=>[(0,r.Wm)(a,{name:s.Icon,color:"black"},null,8,["name"])])),_:1},8,["use-input","options","option-label","option-value"])}const V={name:"Select-Component",props:{Icon:String,IsUseInput:{default:!0},Options:Array,OptionsLabel:String,OptionsValue:String}};var U=s(4260),q=s(1665),x=s(4554),_=s(7518),k=s.n(_);const F=(0,U.Z)(V,[["render",v]]),O=F;k()(V,"components",{QSelect:q.Z,QIcon:x.Z});var W=s(52),E=s.n(W),I=location.protocol,N=I+"//servicodados.ibge.gov.br";function Z(){return new Promise((e=>{E().defaults.baseURL=N,e()}))}function Q(e){return new Promise(((t,s)=>{Z().then((()=>{E().get(N+e).then((e=>{t(e)})).catch((e=>{s(e)}))}))}))}("http:"===I||"https:"===I)&&(N+="/api/v1/");var B=s(9281);function L(e){return new Promise((t=>{var s=e.split("/");t(new Date(s[2],s[1]-1,s[0],0,0,0))}))}const $={name:"User-Dialog",components:{Select:O},data(){return{passwordUser:"",id:"",name:"",email:"",birthDate:"",cpfPis:"",maskedCpfPis:"",countrySelected:"",stateSelected:"",citySelected:"",streetSelected:"",numberSelected:"",districtSelected:"",complementSelected:"",titleDialog:"",cepSelected:"",isUpdate:!1,isDisabled:!1,isPis:!1,errorCEP:!1,errorName:!1,errorEmail:!1,errorBirthDate:!1,errorCpfPis:!1,errorCountrySelected:!1,errorStateSelected:!1,errorCitySelected:!1,errorStreetSelected:!1,errorNumberSelected:!1,errorDistrictSelected:!1,errorPassword:!1,showDialog:!1,countryFilter:[],countryData:[],stateData:[],stateFilter:[],cityFilter:[],cityData:[]}},methods:{validateData(){return new Promise((e=>{var t=!1;""===this.email||null===this.email?(t=!0,this.errorEmail=!0):(t=!1,this.errorEmail=!1),""===this.cpfPis||null===this.cpfPis?(t=!0,this.errorCpfPis=!0):(t=!1,this.errorCpfPis=!1),""===this.name||null===this.name?(t=!0,this.errorName=!0):(t=!1,this.errorName=!1),""===this.birthDate||null===this.birthDate?(t=!0,this.errorBirthDate=!0):(t=!1,this.errorBirthDate=!1),""===this.countrySelected||null===this.countrySelected?(t=!0,this.errorCountrySelected=!0):(t=!1,this.errorCountrySelected=!1),""===this.stateSelected||null===this.stateSelected?(t=!0,this.errorStateSelected=!0):(t=!1,this.errorStateSelected=!1),""===this.citySelected||null===this.citySelected?(t=!0,this.errorCitySelected=!0):(t=!1,this.errorCitySelected=!1),""===this.streetSelected||null===this.streetSelected?(t=!0,this.errorStreetSelected=!0):(t=!1,this.errorStreetSelected=!1),""===this.numberSelected||null===this.numberSelected?(t=!0,this.errorNumberSelected=!0):(t=!1,this.errorNumberSelected=!1),""===this.districtSelected||null===this.districtSelected?(t=!0,this.errorDistrictSelected=!0):(t=!1,this.errorDistrictSelected=!1),t=""===this.complementSelected||null===this.complementSelected,""===this.cepSelected||null===this.cepSelected?(t=!0,this.errorCEP=!0):(t=!1,this.errorCEP=!1),!1===this.isUpdate&&(""===this.passwordUser||null===this.passwordUser?(this.errorPassword=!0,t=!0):(t=!1,this.errorPassword=!1)),0==t?e(!1):this.$q.notify({message:"Preencha todos os campos para salvar",type:"negative"})}))},close(){this.showDialog=!this.showDialog,this.cleanFields()},setNameState(e){Q("localidades/estados/"+e).then((e=>{this.stateSelected=e.data})).catch((e=>{console.log(e)}))},insertDataField(e,t){this.id=e.id,this.cepSelected=e.cep,this.streetSelected=e.street,this.complementSelected=e.complement,this.name=e.name,this.email=e.email,this.numberSelected=e.number,this.birthDate=new Date(e.birthDate).toLocaleDateString("pt-BR"),this.countrySelected=e.country.toUpperCase(),this.setNameState(e.state),this.citySelected=e.city.toUpperCase(),this.districtSelected=e.district,this.isPis="S"===e.isPis,this.cpfPis=e.cpfPis,this.titleDialog=t.toUpperCase(),this.masked(this.isPis)},show(e,t,s){this.showDialog=!this.showDialog,null!==e?(this.isUpdate=s,this.insertDataField(e,t)):(this.titleDialog=t.toUpperCase(),this.isUpdate=s,this.isPis=!0)},filterCountry(e,t){t(""!==e?()=>{const t=e.toUpperCase();this.countryFilter=this.countryData.filter((e=>e.indexOf(t)>-1))}:()=>{this.countryFilter=this.countryData})},filterCity(e,t){t(""!==e?()=>{const t=e.toUpperCase();this.cityFilter=this.cityData.filter((e=>e.indexOf(t)>-1))}:()=>{this.cityFilter=this.cityData})},filterState(e,t){t(""!==e?()=>{const t=e.toUpperCase();this.stateFilter=this.stateData.filter((e=>e.nome.indexOf(t)>-1))}:()=>{this.stateFilter=this.stateData})},getCoutries(){Q("paises").then((e=>{for(var t=0;t<e.data.length;t++)this.countryData.push(e.data[t].nome.abreviado.toUpperCase());this.countryData=this.countryData.sort((function(e,t){return e<t?-1:e>t?1:0}))})).catch((e=>{console.log("NÃO FOI POSSÍVEL OBTER PAÍSES"),console.log(e)}))},getStates(){Q("localidades/estados").then((e=>{for(var t=0;t<e.data.length;t++){var s=Object();s.sigla=e.data[t].sigla,s.nome=e.data[t].nome.toUpperCase(),this.stateData.push(s)}this.stateData=this.stateData.sort((function(e,t){return e.nome<t.nome?-1:e.nome>t.nome?1:0}))})).catch((e=>{console.log("NÃO FOI POSSÍVEL OBTER AS UFs"),console.log(e)}))},getCities(e){Q(`localidades/estados/${e}/municipios`).then((e=>{for(var t=0;t<e.data.length;t++)this.cityData.push(e.data[t].nome.toUpperCase());this.cityData=this.cityData.sort((function(e,t){return e<t?-1:e>t?1:0}))})).catch((e=>{console.log("NÃO FOI POSSÍVEL OBTER AS UFs"),console.log(e)}))},searchCep(){if(10===this.cepSelected.length){this.errorCEP=!1;var e=this.cepSelected.replace(".","").replace("-","");(0,B.dX)("cep/"+e).then((e=>{200===e.status&&""!==e.data.cep&&(this.streetSelected=e.data.logradouro,this.districtSelected=e.data.bairro,this.complementSelected=e.data.complemento),200===e.status&&!0===e.data.erro&&(console.log(e.data),this.$q.notify({message:"CEP Inexistente, tente outro...",type:"negative",icon:"error",timeout:2e3}))})).catch((e=>{console.log(e)}))}else this.errorCEP=!0,this.$q.notify({message:"CEP Inválido",type:"negative",icon:"error",position:"center",timeout:2e3})},cleanFields(){this.id="",this.name="",this.email="",this.birthDate="",this.cpfPis="",this.countrySelected="",this.stateSelected="",this.citySelected="",this.streetSelected="",this.numberSelected="",this.districtSelected="",this.complementSelected="",this.cepSelected="",this.isPis=!1,this.errorCEP=!1,this.errorName=!1,this.errorEmail=!1,this.errorBirthDate=!1,this.errorCpfPis=!1,this.errorCountrySelected=!1,this.errorStateSelected=!1,this.errorCitySelected=!1,this.errorStreetSelected=!1,this.errorNumberSelected=!1,this.errorDistrictSelected=!1,this.errorPassword=!1},async saveUpdate(){this.validateData().then((async()=>{var e=Object();e.Id=this.id,e.CEP=this.cepSelected.replace(".","").replace("-",""),e.City=this.citySelected.toUpperCase(),e.State=this.stateSelected.sigla.toUpperCase(),e.Country=this.countrySelected.toUpperCase(),e.BirthDate=await L(this.birthDate),e.Email=this.email,e.Complement=this.complementSelected,e.IsPis=this.isPis,e.CpfPis=this.cpfPis,e.District=this.districtSelected,e.Street=this.streetSelected,e.Name=this.name,e.Number=this.numberSelected,this.isDisabled=!0,!1===this.isUpdate?(e.PasswordString=this.passwordUser,""===e.PasswordString||null===e.PasswordString?(this.errorPassword=!0,this.$q.notify({message:"Senha não inserida!!!",type:"negative"})):this.postData(e)):this.updateData(e),this.isDisabled=!1}))},postData(e){(0,B.SO)("user/new",e).then((e=>{!0===e.data.status?this.$q.notify({message:e.data.msg,type:"positive"}):this.$q.notify({message:e.data.msg,type:"negative"}),this.showDialog=!this.showDialog,this.cleanFields(),this.$emit("reloadData")})).catch((e=>{console.log(e),this.$q.notify({message:"Erro ao criar usuário, tente novamente mais tarde",type:"negative"})}))},updateData(e){(0,B.qb)("user/"+e.Id,e).then((e=>{console.log(e.data),!0===e.data.status?(this.$q.notify({message:e.data.msg,type:"positive",timeout:3e3}),this.showDialog=!this.showDialog,this.cleanFields(),this.$emit("reloadData")):this.$q.notify({message:e.data.msg,type:"negative"})})).catch((e=>{console.log(e.message)}))},masked(e){this.maskedCpfPis=!0===e?"###.#####.##-#":"###.###.###-##"}},watch:{countrySelected:function(e){"brasil"===e.toLowerCase()&&this.getStates()},stateSelected:function(e){""!==e.sigla&&this.getCities(e.sigla)},isPis:function(e){this.masked(e)}},created(){this.getCoutries()}};var T=s(4390),j=s(3066),R=s(3812),z=s(3747),A=s(8240),Y=s(2652),J=s(4379),M=s(4842),X=s(3944),H=s(3124),G=s(8886),K=s(8870),ee=s(677);const te=(0,U.Z)($,[["render",P]]),se=te;k()($,"components",{QDialog:T.Z,QLayout:j.Z,QHeader:R.Z,QToolbarTitle:z.Z,QBtn:A.Z,QPageContainer:Y.Z,QPage:J.Z,QInput:M.Z,QIcon:x.Z,QPopupProxy:X.Z,QDate:H.Z,QToggle:G.Z,QTooltip:K.Z}),k()($,"directives",{ClosePopup:ee.Z})}}]);